(function(){"use strict";var t={5384:function(t,e,s){var o=s(9242),r=s(3396);const n={id:"app"},i=(0,r._)("div",{class:"header"},[(0,r._)("h1",null,"Interface obsługi API"),(0,r._)("a",{href:"https://github.com/szmotala",target:"_blank",rel:"noopener noreferrer"},"by szmotala")],-1),a={class:"content"};function l(t,e,s,o,l,c){const u=(0,r.up)("FilterPanel"),p=(0,r.up)("PostListComponent");return(0,r.wg)(),(0,r.iD)("div",n,[i,(0,r._)("div",a,[(0,r.Wm)(u,{class:"filter-panel"}),(0,r.Wm)(p,{class:"post-list"})])])}var c=s(9749);const u={class:"post-list-content"};function p(t,e,s,o,n,i){const a=(0,r.up)("PagePaginationComponent"),l=(0,r.up)("PageComponent");return(0,r.wg)(),(0,r.iD)("div",u,[(0,r.Wm)(a),(0,r.Wm)(l)])}const d={key:0,class:"post-list-container"},h={key:1};function g(t,e,s,o,n,i){const a=(0,r.up)("PostDetails");return(0,r.wg)(),(0,r.iD)("div",null,[t.posts&&t.usersList?((0,r.wg)(),(0,r.iD)("div",d,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.posts,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"post-container",key:e.id},[(0,r.Wm)(a,{postData:e,user:t.usersList.find((t=>t.id===e.userId))},null,8,["postData","user"])])))),128))])):((0,r.wg)(),(0,r.iD)("div",h,"Loading"))])}var m=s(7139);const f={class:"title"},v={class:"main-content"},P={class:"author"},y={key:0},w={key:1},_={class:"button-wrapper"};function L(t,e,s,o,n,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,m.C_)(["post-card",n.isDeleted?"ondelete":""])},[(0,r._)("h3",f,(0,m.zw)(s.postData.title),1),(0,r._)("div",v,[(0,r._)("h5",P,"Autor: "+(0,m.zw)(s.user.name),1),(0,r._)("p",{class:(0,m.C_)(["text-body",n.isElipsis?"elipsis":""])},(0,m.zw)(s.postData.body),3),(0,r._)("p",{class:"read-more",onClick:e[0]||(e[0]=t=>i.readMore())},[n.isElipsis?((0,r.wg)(),(0,r.iD)("span",y,"zobacz więcej")):((0,r.wg)(),(0,r.iD)("span",w,"zobacz mniej"))])]),(0,r._)("div",_,[(0,r._)("div",{class:"button-content",onClick:e[1]||(e[1]=e=>[i.removePost(),t.deletePost(s.postData.id)])}," usuń ")])],2)}var b={name:"PostDetails",props:["postData","user"],data(){return{isDeleted:!1,isElipsis:!0}},methods:{...(0,c.nv)(["deletePost"]),removePost(){this.isDeleted=!0},readMore(){this.isElipsis=!this.isElipsis}}},D=s(89);const F=(0,D.Z)(b,[["render",L]]);var C=F,k={name:"PageComponent",components:{PostDetails:C},computed:{...(0,c.Se)({usersList:"getAllUsers",posts:"getPosts"})},methods:{}};const O=(0,D.Z)(k,[["render",g]]);var z=O;const j={class:"pagination-container"},x=(0,r._)("p",null,"Strona:",-1),A={key:0,class:"pagination-buttons-container"},E=["onClick"],M={key:1},U=["value"];function q(t,e,s,n,i,a){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",j,[x,i.mediaLarge?((0,r.wg)(),(0,r.iD)("div",A,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(new Array(a.pageCount),((t,e)=>((0,r.wg)(),(0,r.iD)("div",{class:"pagination-button-container",key:e},[(0,r._)("button",{class:(0,m.C_)([i.currentPage===e+1?"active":""]),onClick:t=>i.currentPage=e+1},(0,m.zw)(e+1),11,E)])))),128))])):((0,r.wg)(),(0,r.iD)("div",M,[(0,r.wy)((0,r._)("select",{class:"pagination-select","onUpdate:modelValue":e[0]||(e[0]=t=>i.currentPage=t)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(new Array(a.pageCount),((t,e)=>((0,r.wg)(),(0,r.iD)("option",{key:e+1,value:e+1},(0,m.zw)(e+1),9,U)))),128))],512),[[o.bM,i.currentPage]])]))])])}var S={name:"PagePaginationComponent",data(){return{currentPage:1,mediaLarge:!1}},computed:{...(0,c.Se)({count:"getCount",pageLimit:"getPageLimit"}),pageCount(){let t=this.count/this.pageLimit;return console.log(Math.round(t)),Math.ceil(t)}},methods:{...(0,c.nv)(["fetchPostsByOffset","setListProps"]),onResize(){window.innerWidth>960?this.mediaLarge=!0:this.mediaLarge=!1}},created(){window.addEventListener("resize",this.onResize),this.onResize()},beforeMounted(){window.removeEventListener("resize",this.onResize)},watch:{currentPage(){this.setListProps({start:this.pageLimit*(this.currentPage-1),page:this.currentPage}),this.fetchPostsByOffset()}}};const $=(0,D.Z)(S,[["render",q]]);var B=$,W={name:"PostListComponent",components:{PageComponent:z,PagePaginationComponent:B},computed:{},methods:{...(0,c.nv)(["fetchPostsByOffset","setListProps"])},created(){this.fetchPostsByOffset()}};const V=(0,D.Z)(W,[["render",p]]);var Z=V,I=s(5946),H=s(2424),K=s(79);const R=(0,r._)("img",{src:I,alt:""},null,-1),T=[R],Y=(0,r._)("img",{src:H,alt:""},null,-1),G=[Y],J={class:"search-box"},N=(0,r._)("img",{src:K,alt:"Search Icon"},null,-1),Q={class:"filter-box"},X=(0,r._)("label",{for:"authorFilter"},"Autor: ",-1),tt=(0,r._)("option",{value:""},"wszyscy",-1),et=["value"],st={class:"filter-box"},ot=(0,r._)("label",{for:"sortFilter"},"Filtruj: ",-1),rt=(0,r._)("option",{value:""},"reset",-1),nt=(0,r._)("option",{value:"title&_order=desc"},"tytył malejąco",-1),it=(0,r._)("option",{value:"title&_order=asc"},"tytuł rosnąco",-1),at=[rt,nt,it],lt={class:"reset-btn-box"};function ct(t,e,s,n,i,a){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",{class:"filter-menu-btn",onClick:e[0]||(e[0]=t=>a.openMenu())},T),(0,r._)("div",{class:(0,m.C_)(["filter-content",i.isOpen?"active":""])},[(0,r._)("div",{class:"close-menu-btn",onClick:e[1]||(e[1]=t=>a.openMenu())},G),(0,r._)("div",J,[N,(0,r.wy)((0,r._)("input",{name:"searchTxtBox",type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>i.searchPhrase=t),placeholder:"Wyszukaj w tekście"},null,512),[[o.nr,i.searchPhrase]])]),(0,r._)("div",Q,[X,(0,r.wy)((0,r._)("select",{id:"authorFilter","onUpdate:modelValue":e[3]||(e[3]=t=>i.authorFilter=t)},[tt,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.users,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t.id,value:t.id},(0,m.zw)(t.name),9,et)))),128))],512),[[o.bM,i.authorFilter]])]),(0,r._)("div",st,[ot,(0,r.wy)((0,r._)("select",{id:"sortFilter","onUpdate:modelValue":e[4]||(e[4]=t=>i.sortFilter=t)},at,512),[[o.bM,i.sortFilter]])]),(0,r._)("div",lt,[(0,r._)("button",{onClick:e[5]||(e[5]=t=>a.resetValues())},"reset")])],2)])}var ut={name:"FilterPanel",data(){return{searchPhrase:"",authorFilter:null,sortFilter:null,isOpen:!1}},computed:{...(0,c.Se)({users:"getAllUsers"})},methods:{...(0,c.nv)(["setFilter","fetchPostsByOffset","fetchPostsLength","setListProps"]),openMenu(){console.log("działa"),this.isOpen=!this.isOpen},resetValues(){this.searchPhrase="",this.authorFilter=null,this.sortFilter=null,this.applyFilters()},applyFilters(){let t=`body_like=${this.searchPhrase}`;this.authorFilter&&""!==this.authorFilter&&(t=t.concat(`&userId=${this.authorFilter}`)),this.sortFilter&&""!==this.sortFilter&&(t=t.concat(`&_sort=${this.sortFilter}`)),console.log(t),this.setFilter(t),this.setListProps({start:0,page:1}),this.fetchPostsLength(),this.fetchPostsByOffset()}},watch:{searchPhrase(){this.applyFilters()},authorFilter(){this.applyFilters()},sortFilter(){this.applyFilters()}}};const pt=(0,D.Z)(ut,[["render",ct]]);var dt=pt,ht={name:"App",components:{PostListComponent:Z,FilterPanel:dt},computed:{},methods:{...(0,c.nv)(["fetchPostsLength","fetchAllUsers","setListProps"])},created(){this.fetchPostsLength(),this.fetchAllUsers(),this.setListProps({start:0,page:1})}};const gt=(0,D.Z)(ht,[["render",l]]);var mt=gt,ft=s(6265),vt=s.n(ft);const Pt={posts:null,count:0,currentPage:1,currentStart:0,pageLimit:10,filter:""},yt={getPosts:t=>t.posts,getCount:t=>t.count,getPageLimit:t=>t.pageLimit,getCurrentPage:t=>t.currentPage},wt={setListProps({commit:t},e){t("setPostListProps",e)},setFilter({commit:t},e){t("setFilterProps",e)},async fetchAllPosts({commit:t}){try{const e=await vt().get("https://jsonplaceholder.typicode.com/posts");t("setPostsList",e.data),t("setDataCount",e.data.length)}catch(e){e.response?console.log(e.response):e.request?console.log(e.request):console.log("Error",e.message)}},async fetchPostsLength({commit:t}){try{const e=await vt().get(`https://jsonplaceholder.typicode.com/posts?${Pt.filter}`);t("setDataCount",e.data.length)}catch(e){e.response?console.log(e.response):e.request?console.log(e.request):console.log("Error",e.message)}},async fetchPostsByOffset({commit:t}){try{const e=await vt().get(`https://jsonplaceholder.typicode.com/posts?${Pt.filter}&_start=${Pt.currentStart}&_limit=${Pt.pageLimit}`);t("setPostsList",e.data)}catch(e){e.response?console.log(e.response):e.request?console.log(e.request):console.log("Error",e.message)}},async deletePost({commit:t},e){try{await vt()["delete"](`https://jsonplaceholder.typicode.com/posts/${e}`);const s=await vt().get(`https://jsonplaceholder.typicode.com/posts?_start=${Pt.currentStart+Pt.pageLimit}&_limit=1`);t("deletePost",e),t("setPostListProps",{start:Pt.currentStart+1,page:Pt.currentPage}),void 0!==s.data[0]&&t("updatePostList",s.data[0])}catch(s){s.response?console.log(s.response):s.request?console.log(s.request):console.log("Error",s.message)}}},_t={setPostsList:(t,e)=>t.posts=e,setDataCount:(t,e)=>t.count=e,setPostListProps:(t,e)=>{t.currentStart=e.start,t.currentPage=e.page},setFilterProps:(t,e)=>{t.filter=e},deletePost:(t,e)=>t.posts=t.posts.filter((t=>t.id!==e)),updatePostList:(t,e)=>t.posts.push(e)};var Lt={state:Pt,getters:yt,actions:wt,mutations:_t};const bt={users:null},Dt={getAllUsers:t=>t.users},Ft={async fetchAllUsers({commit:t}){try{const e=await vt().get("https://jsonplaceholder.typicode.com/users"),s=e.data.map((t=>({id:t.id,name:t.name})));t("setUsersList",s)}catch(e){e.response?console.log(e.response):e.request?console.log(e.request):console.log("Error",e.message),console.log(e)}}},Ct={setUsersList:(t,e)=>t.users=e};var kt={state:bt,getters:Dt,actions:Ft,mutations:Ct},Ot=(0,c.MT)({modules:{posts:Lt,users:kt}});(0,o.ri)(mt).use(Ot).mount("#app")},2424:function(t,e,s){t.exports=s.p+"img/close-icon.2bf22ea5.svg"},5946:function(t,e,s){t.exports=s.p+"img/filter-icon.75e3ab15.svg"},79:function(t,e,s){t.exports=s.p+"img/search-icon.30cdcafb.svg"}},e={};function s(o){var r=e[o];if(void 0!==r)return r.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,o,r,n){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],r=t[u][1],n=t[u][2];for(var a=!0,l=0;l<o.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(t){return s.O[t](o[l])}))?o.splice(l--,1):(a=!1,n<i&&(i=n));if(a){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[o,r,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.p="/vue-api-project/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,n,i=o[0],a=o[1],l=o[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(l)var u=l(s)}for(e&&e(o);c<i.length;c++)n=i[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},o=self["webpackChunkvueapp"]=self["webpackChunkvueapp"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(5384)}));o=s.O(o)})();
//# sourceMappingURL=app.5c5e4db7.js.map